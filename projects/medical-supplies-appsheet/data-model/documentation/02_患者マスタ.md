# 患者マスタ (patients)

## テーブル概要
- **テーブル名**: patients
- **説明**: 各施設に所属する患者の基本情報を管理
- **主キー**: 患者ID

## カラム定義

| カラム名 | 物理名 | データ型 | 必須 | 列種別 | 説明 |
|---------|--------|----------|------|--------|------|
| 患者ID | patient_id | Text | ✓ | 物理 | 一意識別子（6桁数字） |
| 施設ID | facility_id | Ref | ✓ | 物理 | 所属施設（facilities参照） |
| 姓 | last_name | Text | ✓ | 物理 | 患者の姓 |
| 名 | first_name | Text | ✓ | 物理 | 患者の名 |
| フルネーム | full_name | Text | | 仮想 | 姓名結合（計算式: CONCATENATE([姓], " ", [名])） |
| 入院日 | admission_date | Date | | 物理 | 入院/利用開始日 |
| 退院日 | discharge_date | Date | | 物理 | 退院/利用終了日 |
| 状態 | status | Enum | ✓ | 物理 | 利用中/退院済み |
| 施設名 | facility_name | Text | | 仮想 | 施設名（計算式: [施設ID].[施設名]） |
| 利用日数 | days_of_use | Number | | 仮想 | 利用日数（計算式: IF(ISBLANK([退院日]), TODAY()-[入院日], [退院日]-[入院日])） |

## 状態の選択肢
- 利用中
- 退院済み

## AppSheet設定
- **ラベル**: CONCATENATE([姓], " ", [名])
- **キー**: 患者ID
- **リレーション**: 施設ID → facilities.facility_id
- **フィルタ**: 状態 = "利用中"（デフォルト表示）