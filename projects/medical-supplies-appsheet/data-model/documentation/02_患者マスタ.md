# 患者マスタ (patients)

## テーブル概要
- **テーブル名**: patients
- **説明**: 各施設に所属する患者の基本情報を管理
- **主キー**: 患者ID

## カラム定義

| カラム名 | 物理名 | データ型 | 必須 | 列種別 | 説明 |
|---------|--------|----------|------|--------|------|
| 患者ID | patient_id | Text | ✓ | 物理 | 一意識別子（6桁数字） |
| 表示患者ID | display_patient_id | Text | | 仮想 | 6桁ゼロパディング表示（計算式: RIGHT("000000" & [患者ID], 6)） |
| 施設名 | facility_name_input | Text | | 物理 | 施設名入力欄（LOOKUP用） |
| 施設ID | facility_id | Ref | ✓ | 仮想 | 所属施設（計算式: LOOKUP([施設名], "施設マスタ", "施設名", "施設ID")） |
| 患者名 | patient_name | Text | ✓ | 物理 | 患者の氏名 |
| 備考 | notes | LongText | | 物理 | 患者に関する特記事項 |
| 有効 | is_active | Yes/No | ✓ | 物理 | 有効/無効フラグ |

## AppSheet設定
- **ラベル**: [患者名]
- **キー**: 患者ID
- **リレーション**: 施設ID → facilities.facility_id
- **フィルタ**: 有効 = TRUE（デフォルト表示）
- **計算式**:
  - 表示患者ID = RIGHT("000000" & [患者ID], 6)
  - 施設ID = LOOKUP([施設名], "施設マスタ", "施設名", "施設ID")
- **入力方法**:
  - 施設名欄に施設名を入力すると、AppFormulaで施設IDが自動的にLOOKUPされます