# 患者マスタ (patients)

## テーブル概要
- **テーブル名**: patients
- **説明**: 各施設に所属する患者の基本情報を管理
- **主キー**: 患者ID

## カラム定義

| カラム名 | 物理名 | データ型 | 必須 | 列種別 | 説明 |
|---------|--------|----------|------|--------|------|
| 患者ID | patient_id | Text | ✓ | 物理 | 一意識別子（6桁数字） |
| 施設ID | facility_id | Ref | ✓ | 物理 | 所属施設（facilities参照） |
| 姓 | last_name | Text | ✓ | 物理 | 患者の姓 |
| 名 | first_name | Text | ✓ | 物理 | 患者の名 |
| 氏名 | fullname | Text | | 物理 | 患者の氏名（姓と名を半角スペースで結合） |
| 有効 | is_active | Yes/No | ✓ | 物理 | 有効/無効フラグ |
| フルネーム | full_name | Text | | 仮想 | 姓名結合（計算式: CONCATENATE([姓], " ", [名])） |
| 施設名 | facility_name | Text | | 仮想 | 施設名（計算式: [施設ID].[施設名]） |

## AppSheet設定
- **ラベル**: CONCATENATE([姓], " ", [名])
- **キー**: 患者ID
- **リレーション**: 施設ID → facilities.facility_id
- **フィルタ**: 有効 = TRUE（デフォルト表示）